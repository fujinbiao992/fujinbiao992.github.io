<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-ECMAScript6" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/09/12/ECMAScript6/" class="article-date">
  <time datetime="2021-09-12T02:49:13.932Z" itemprop="datePublished">2021-09-12</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="1-ES6"><a href="#1-ES6" class="headerlink" title="1.ES6"></a>1.ES6</h1><h2 id="1-变量声明扩展"><a href="#1-变量声明扩展" class="headerlink" title="1- 变量声明扩展"></a>1- 变量声明扩展</h2><ul>
<li>原有变量声明: var<ul>
<li>有变量声明提升</li>
<li>没有块级作用域</li>
<li>不方便维护,代码格式松散</li>
</ul>
</li>
<li>let<ul>
<li>没有变量声明提升. 声明之前使用会报错</li>
<li>有块级作用域. 配合for循环使用,会保留块级作用域变量</li>
<li>只允许声明一次,值可以多次覆盖</li>
</ul>
</li>
<li>const<ul>
<li>没有变量声明提升, 声明之前使用会报错</li>
<li>声明就要赋值, 不允许多次声明和修改</li>
<li>有块级作用域</li>
</ul>
</li>
</ul>
<h2 id="2-解构赋值"><a href="#2-解构赋值" class="headerlink" title="2- 解构赋值"></a>2- 解构赋值</h2><h3 id="数组对象解构赋值"><a href="#数组对象解构赋值" class="headerlink" title="数组对象解构赋值:"></a>数组对象解构赋值:</h3><ul>
<li>注意点: 只要对应值是undefined 默认值才生效, 除undefined外任何值都会给变量赋值. 包括null</li>
</ul>
<h5 id="1-数组解构"><a href="#1-数组解构" class="headerlink" title="1. 数组解构"></a>1. 数组解构</h5><ul>
<li>变量赋值(可以指定默认值)</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [a,b,c] = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="comment">// a=1 b=2 c=3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [a,b, ...c] = [<span class="number">1</span>]</span><br><span class="line"><span class="comment">// a=1 b=undefined c=[]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [a, ...b] = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="comment">// a=1 b=[2,3]</span></span><br></pre></td></tr></table></figure>

<ul>
<li>等号右边必须是可遍历结构如: 数组,Set,Iterator等</li>
<li>面试题:</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;aaa&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [x = f()] = [<span class="number">1</span>];</span><br><span class="line"><span class="comment">// 函数f不会执行, 数组中默认值是惰性的, 即 x只先接收等号右边的值1</span></span><br></pre></td></tr></table></figure>

<h5 id="1-2-对象解构"><a href="#1-2-对象解构" class="headerlink" title="1.2 对象解构"></a>1.2 对象解构</h5><ul>
<li>变量赋值(可以指定默认值)</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;与数组解构不同的是: 数组解构按索引的顺序赋值, 对象的结构是按属性名字赋值&#x27;</span></span><br><span class="line">    <span class="keyword">let</span> &#123; a , b &#125; = &#123; <span class="attr">a</span>:<span class="number">1</span> , <span class="attr">b</span>:<span class="number">2</span> &#125;</span><br><span class="line">    <span class="comment">// a=1 b=2</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> &#123; <span class="attr">a</span>:b &#125; = &#123; <span class="attr">a</span>:<span class="number">1</span> , <span class="attr">b</span>:<span class="number">2</span> &#125;</span><br><span class="line">    <span class="comment">// b=1  a本次做属性,b才做变量</span></span><br></pre></td></tr></table></figure>

<ul>
<li>面试题</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">    <span class="attr">a</span>:[</span><br><span class="line">        <span class="number">1</span>,</span><br><span class="line">        [c:<span class="number">2</span>]</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> &#123;</span><br><span class="line">    <span class="attr">a</span>:[</span><br><span class="line">        b,</span><br><span class="line">        [c]</span><br><span class="line">    ]</span><br><span class="line">&#125; = obj</span><br><span class="line"></span><br><span class="line"><span class="comment">// b=1 , c=2</span></span><br><span class="line"><span class="comment">// 两个对象中a都是做属性, 值数组中解构按照索引对应:  b对应1, [c]对应[c:2] , c为2</span></span><br></pre></td></tr></table></figure>



<p>#####1.3 字符串解构</p>
<ul>
<li>字符串会被拆成数组参与结构, 与数组类似</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [a,b,c] = <span class="string">&#x27;123&#x27;</span></span><br><span class="line"><span class="comment">//a=&#x27;1&#x27; b=&#x27;2&#x27; c=&#x27;3&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> &#123; <span class="attr">length</span>:len &#125; = <span class="string">&#x27;123&#x27;</span></span><br><span class="line"><span class="comment">// len = 3   字符串共享length属性,值是字符串长度</span></span><br></pre></td></tr></table></figure>

<h5 id="4-数字-布尔值解构"><a href="#4-数字-布尔值解构" class="headerlink" title="4. 数字,布尔值解构"></a>4. 数字,布尔值解构</h5><ul>
<li>解构时等号右边的数字或字母会被包装成对应类型的 对象</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123; <span class="attr">toString</span>: a &#125; = <span class="number">123</span></span><br><span class="line"><span class="comment">// a=Number.prototype.toString</span></span><br><span class="line"><span class="comment">// 可以理解为:  123 === 数字Number实例:123.__proto__</span></span><br><span class="line"><span class="comment">// 也就是 &#123;toString : a&#125; = Number.prototype</span></span><br><span class="line"><span class="comment">// 数字包装对象Nunmber 原型方法中</span></span><br></pre></td></tr></table></figure>

<h5 id="5-函数参数解构"><a href="#5-函数参数解构" class="headerlink" title="5. 函数参数解构"></a>5. 函数参数解构</h5><ul>
<li>参数数组解构 === 接收有默认值的形参</li>
<li>其余参考数组,对象解构</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params"> [a,b] </span>)</span>&#123; <span class="comment">/*逻辑*/</span> &#125;</span><br><span class="line">f1([<span class="number">1</span>,<span class="number">2</span>])</span><br><span class="line"></span><br><span class="line">等价于</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params">a=<span class="number">1</span> , b=<span class="number">2</span></span>)</span>&#123;<span class="comment">/*逻辑*/</span> &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>面试题</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f2</span>(<span class="params"> &#123;a=<span class="number">1</span> , b=<span class="number">2</span>&#125; = &#123;&#125; </span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(a)</span><br><span class="line">    <span class="built_in">console</span>.log(b)</span><br><span class="line">&#125;</span><br><span class="line">f2()    </span><br><span class="line"><span class="comment">// 1 , 2  ab使用默认值</span></span><br><span class="line"></span><br><span class="line">f2(&#123; <span class="attr">a</span>:<span class="number">0</span> , <span class="attr">b</span>:<span class="number">1</span> &#125;)   </span><br><span class="line"><span class="comment">// 0 , 1  ab使用解构传入参数值</span></span><br><span class="line"></span><br><span class="line">f2(&#123; <span class="attr">a</span>:<span class="number">0</span> &#125;)  </span><br><span class="line"><span class="comment">// 0 , 2 a使用实参解构,b使用默认值</span></span><br></pre></td></tr></table></figure>
<h2 id="3-字符串扩展"><a href="#3-字符串扩展" class="headerlink" title="3- 字符串扩展"></a>3- 字符串扩展</h2><h5 id="1-遍历字符串-for…of"><a href="#1-遍历字符串-for…of" class="headerlink" title="1. 遍历字符串 for…of"></a>1. 遍历字符串 for…of</h5><ul>
<li>更健壮的循环字符串</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">传统需要</span><br><span class="line">    str.split[<span class="string">&#x27;&#x27;</span>].forEach(callback) </span><br><span class="line">    或者 </span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i =<span class="number">0</span> ; i&lt;str.length ;i++)&#123; str.charCodeAt(i) &#125;</span><br><span class="line"></span><br><span class="line">现在只需要 </span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> code <span class="keyword">of</span> str)&#123; <span class="built_in">console</span>.log(code) &#125;</span><br><span class="line">优点:更准确,范围更广</span><br></pre></td></tr></table></figure>

<h5 id="2-获取内容-at-i"><a href="#2-获取内容-at-i" class="headerlink" title="2. 获取内容 at(i)"></a>2. 获取内容 at(i)</h5><ul>
<li>更健壮的获取字符串指定位置的中文内容</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str = <span class="string">&#x27;𠮷&#x27;</span></span><br><span class="line"></span><br><span class="line">传统需要 </span><br><span class="line">    str.charAt(<span class="number">0</span>)   <span class="comment">// &quot;\uD842&quot; 获取到urf编码的第一个字节</span></span><br><span class="line"></span><br><span class="line">现在需要</span><br><span class="line">    str.at(<span class="number">0</span>)       <span class="comment">// &#x27;𠮷&#x27;     获取内容</span></span><br><span class="line">    </span><br></pre></td></tr></table></figure>

<h5 id="3-检测内容-includes-startsWith-endsWidth"><a href="#3-检测内容-includes-startsWith-endsWidth" class="headerlink" title="3. 检测内容 includes() | startsWith() | endsWidth()"></a>3. 检测内容 includes() | startsWith() | endsWidth()</h5><ul>
<li>includes()：返回布尔值，表示是否找到了参数字符串。</li>
<li>startsWith()：返回布尔值，表示参数字符串是否在源字符串的头部。</li>
<li>endsWith()：返回布尔值，表示参数字符串是否在源字符串的尾部。</li>
</ul>
<h5 id="4-头尾补全-padStart-padEnd"><a href="#4-头尾补全-padStart-padEnd" class="headerlink" title="4. 头尾补全 padStart() | padEnd()"></a>4. 头尾补全 padStart() | padEnd()</h5><ul>
<li>参数1:目标长度 , 参数2:用来做补全的内容.</li>
<li>padStart 用于头部补全;</li>
<li>padEnd 用于尾部补全</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;x&#x27;</span>.padStart(<span class="string">&#x27;123&#x27;</span> , <span class="number">6</span>) <span class="comment">// &#x27;12312x&#x27;</span></span><br></pre></td></tr></table></figure>

<h5 id="5-字符串重复拼接n次的结果返回-repeat-n"><a href="#5-字符串重复拼接n次的结果返回-repeat-n" class="headerlink" title="5. 字符串重复拼接n次的结果返回 repeat(n)"></a>5. 字符串重复拼接n次的结果返回 repeat(n)</h5><ul>
<li>n如果是有整有小数,取整数</li>
<li>传入负值报错</li>
<li>n如果是NaN ,表示0次</li>
</ul>
<h5 id="6-模板字符串-“-变量-“"><a href="#6-模板字符串-“-变量-“" class="headerlink" title="6. 模板字符串 “ ${变量} “"></a>6. 模板字符串 “ <code>$&#123;变量&#125;</code> “</h5><ul>
<li>如果内容是反引号,使用反斜线转义 ‘`’</li>
<li>模板字符串中的空格和索引会保留</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&#x27;#list&#x27;</span>).html(<span class="string">`</span></span><br><span class="line"><span class="string">    &lt;ul&gt;</span></span><br><span class="line"><span class="string">        &lt;li&gt;first&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;li&gt;second&lt;/li&gt;</span></span><br><span class="line"><span class="string">    &lt;/ul&gt;</span></span><br><span class="line"><span class="string">`</span>);</span><br></pre></td></tr></table></figure>

<p>====================================================================</p>
<h2 id="4-正则扩展"><a href="#4-正则扩展" class="headerlink" title="4- 正则扩展"></a>4- 正则扩展</h2><h5 id="1-RegExp实例方法"><a href="#1-RegExp实例方法" class="headerlink" title="1.RegExp实例方法"></a>1.RegExp实例方法</h5><ul>
<li>match()</li>
<li>replace()</li>
<li>split()</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">正则方法整理:</span><br><span class="line"></span><br><span class="line"><span class="number">1.</span>test：测试string是否包含有匹配结果，包含返回<span class="literal">true</span>，不包含返回<span class="literal">false</span></span><br><span class="line">    <span class="keyword">var</span> str = <span class="string">&quot;bbs.byr.cn&quot;</span>; </span><br><span class="line">    <span class="keyword">var</span> reg = <span class="regexp">/b/</span>; </span><br><span class="line">    <span class="keyword">var</span> ret = reg.test(str); </span><br><span class="line">    alert(ret); <span class="comment">//true </span></span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>match：根据pattern进行正则匹配,如果匹配到,返回匹配结果,如匹配不到返回<span class="literal">null</span></span><br><span class="line">    <span class="keyword">var</span> str = <span class="string">&quot;ThIS isn&#x27;t me&quot;</span>; </span><br><span class="line">    <span class="keyword">var</span> reg = <span class="regexp">/is/ig</span>; <span class="comment">// g 全局匹配, i忽略大小写</span></span><br><span class="line">    <span class="keyword">var</span> ret = str.match(reg); </span><br><span class="line">    alert(ret); <span class="comment">//IS, is </span></span><br><span class="line">    <span class="built_in">console</span>.log(ret); <span class="comment">//[&quot;IS&quot;, &quot;is&quot;] </span></span><br><span class="line"></span><br><span class="line"><span class="number">3.</span>search ：根据pattern进行正则匹配,如果匹配到一个结果,则返回它的索引数;否则返回-<span class="number">1</span></span><br><span class="line">    <span class="keyword">var</span> str = <span class="string">&quot;This isn&#x27;t me&quot;</span>; </span><br><span class="line">    <span class="keyword">var</span> reg = <span class="regexp">/is/</span>; </span><br><span class="line">    <span class="keyword">var</span> ret = str.search(reg); </span><br><span class="line">    alert(ret);<span class="comment">//2 </span></span><br><span class="line"></span><br><span class="line"><span class="number">4.</span>replace：根据pattern进行正则匹配,把匹配结果替换为replacement</span><br><span class="line">    <span class="keyword">var</span> str = <span class="string">&quot;i love china!&quot;</span>; </span><br><span class="line">    <span class="keyword">var</span> pattern = <span class="regexp">/i/g</span>; </span><br><span class="line">    <span class="keyword">var</span> ret = str.replace(pattern, <span class="string">&quot;I&quot;</span>); </span><br><span class="line">    alert(ret); <span class="comment">//I love chIna! </span></span><br><span class="line"></span><br><span class="line"><span class="number">5.</span>split：根据pattern进行正则分割,返回一个分割的数组</span><br><span class="line">    <span class="keyword">var</span> str = <span class="string">&#x27;http://www.baidu.com/&#x27;</span>; </span><br><span class="line">    <span class="keyword">var</span> reg = <span class="regexp">/\W/</span>;     <span class="comment">// \W 特殊符号  \w非特殊符号</span></span><br><span class="line">    <span class="keyword">var</span> ret = str.split(reg); </span><br><span class="line">    <span class="built_in">console</span>.log(ret); <span class="comment">//[&quot;http&quot;, &quot;&quot;, &quot;&quot;, &quot;www&quot;, &quot;baidu&quot;, &quot;com&quot;, &quot;&quot;]</span></span><br><span class="line"></span><br><span class="line"><span class="number">6.</span>exec：对string进行正则处理,并返回匹配结果.array[<span class="number">0</span>]为原字符串,array[i]为匹配在整个被搜索字符串中的位置</span><br><span class="line">    <span class="keyword">var</span> str = <span class="string">&quot;i love china!&quot;</span>; </span><br><span class="line">    <span class="keyword">var</span> reg = <span class="regexp">/i\B/g</span>; </span><br><span class="line">    <span class="keyword">var</span> ret = reg.exec(str); </span><br><span class="line">    alert(ret); <span class="comment">// i </span></span><br><span class="line">    <span class="built_in">console</span>.log(ret); <span class="comment">//[&quot;i&quot;, index: 9, input: &quot;i love china!&quot;] </span></span><br></pre></td></tr></table></figure>

<ul>
<li>正则表达式基础:</li>
</ul>
<table>
<thead>
<tr>
<th>符号</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>^</td>
<td>以..开头</td>
</tr>
<tr>
<td>$</td>
<td>以..结尾</td>
</tr>
<tr>
<td>*</td>
<td>0次-多次,等价于{0,}</td>
</tr>
<tr>
<td>+</td>
<td>1次-多次,等价于{1,}</td>
</tr>
<tr>
<td>?</td>
<td>0次-1次,等价于{0,1}</td>
</tr>
<tr>
<td>{n}</td>
<td>匹配刚好出现n次</td>
</tr>
<tr>
<td>{n,}</td>
<td>匹配至少出现n次</td>
</tr>
<tr>
<td>{n,m}</td>
<td>匹配出现n - m 次</td>
</tr>
<tr>
<td>.</td>
<td>除换行外任意字符</td>
</tr>
<tr>
<td>\d</td>
<td>匹配一个数字 等价于[0 - 9]</td>
</tr>
<tr>
<td>\D</td>
<td>匹配一个非数字字符 等价于[ ^0-9]</td>
</tr>
<tr>
<td>x | y</td>
<td>匹配x或y</td>
</tr>
<tr>
<td>[x y z]</td>
<td>匹配方括号中的任意字符</td>
</tr>
<tr>
<td>[^x y z]</td>
<td>它匹配任何没有包含在方括号中的字符</td>
</tr>
<tr>
<td>x(?=y)</td>
<td>匹配’x’仅仅当’x’后面跟着’y’</td>
</tr>
<tr>
<td>(?=y)x</td>
<td>匹配’x’仅仅当’x’前面是’y’</td>
</tr>
<tr>
<td>x(?!y)</td>
<td>仅仅当’x’后面不跟着’y’时匹配’x’</td>
</tr>
<tr>
<td>(?&lt;!y)x</td>
<td>仅仅当’x’前面不是’y’时匹配’x’</td>
</tr>
</tbody></table>
<p>#####2.RegExp静态方法</p>
<ul>
<li><p>escape(str)</p>
<ul>
<li>把参数经过转义后返回</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> res = <span class="built_in">escape</span>(<span class="string">&#x27;[&#123;&quot;*&quot;,&quot;!&quot;&#125;]&#x27;</span>)</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="5-数组扩展"><a href="#5-数组扩展" class="headerlink" title="5- 数组扩展"></a>5- 数组扩展</h2><ul>
<li>Array() 参数个数的特性<ul>
<li>0个参数: 创建空数组. Array()===[]</li>
<li>1个参数: 创建参数长度的数组. Array(4) === [ , , , ]</li>
<li>2个以上参数: 参数为数组内容. Array(1,2,3) === [1,2,3]</li>
</ul>
</li>
<li>可以使用Array.of() 代替Array() 方法,传参处理统一作为函数的内容<ul>
<li>n个参数: 创建数组, 参数是数组项. Array.of(undefined) === [undefined]</li>
</ul>
</li>
</ul>
<p>#####1. Array.from(伪数组)___把伪数组转数组</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">    <span class="keyword">let</span> likeArray = &#123;</span><br><span class="line">        <span class="string">&#x27;0&#x27;</span>:<span class="string">&#x27;a&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;1&#x27;</span>:<span class="string">&#x27;b&#x27;</span>,</span><br><span class="line">        <span class="attr">length</span>:<span class="number">2</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="number">1.</span>把伪数组转数组</span><br><span class="line">    es5写法:</span><br><span class="line">    <span class="keyword">let</span> arr = [].slice.call(likeArray)</span><br><span class="line"></span><br><span class="line">    es6写法:</span><br><span class="line">    <span class="keyword">let</span> arr2 = <span class="built_in">Array</span>.from(likeArray)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//结果: [&#x27;a&#x27; , &#x27;b&#x27; ]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>处理伪数组时顺带加工数据</span><br><span class="line">    <span class="keyword">let</span> arr3 = <span class="built_in">Array</span>.from(likeArray , <span class="function"><span class="params">item</span> =&gt;</span> item.toUpperCase() )</span><br><span class="line">    <span class="comment">// 结果: [&#x27;A&#x27; ,&#x27;B&#x27;]</span></span><br></pre></td></tr></table></figure>

<h5 id="2-扩展运算符获取处理伪数组"><a href="#2-扩展运算符获取处理伪数组" class="headerlink" title="2. 扩展运算符获取处理伪数组"></a>2. 扩展运算符获取处理伪数组</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> nodeArr = [ ...document.getElementByTagName(<span class="string">&#x27;li&#x27;</span>) ]</span><br><span class="line"></span><br><span class="line">nodeArr.forEach(callback)</span><br></pre></td></tr></table></figure>

<p>#####3. Array.of()___把实参列表数据存入数组</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr4 = <span class="built_in">Array</span>.of(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line"><span class="comment">// [1,2,3]</span></span><br></pre></td></tr></table></figure>

<p>#####5. Array.prototype.find(callback)___按照callback查找项 || ~.findIndex(callback)___查索引</p>
<ul>
<li>数组实例的find方法，用于找出第一个符合条件的数组成员.如果没有符合条件的成员，则返回undefined</li>
<li>数组实例的findIndex方法, 返回第一个符合条件的数组成员的位置，如果所有成员都不符合条件，则返回-1</li>
</ul>
<h5 id="6-Array-prototype-fill-arg-用arg填满数组"><a href="#6-Array-prototype-fill-arg-用arg填满数组" class="headerlink" title="6. Array.prototype.fill(arg)___用arg填满数组"></a>6. Array.prototype.fill(arg)___用arg填满数组</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line">arr.fill(<span class="string">&#x27;6&#x27;</span>)</span><br><span class="line"><span class="comment">// arr=== [&#x27;6&#x27;,&#x27;6&#x27;,&#x27;6&#x27;,&#x27;6&#x27;]</span></span><br></pre></td></tr></table></figure>

<h5 id="7-Array-prototype-entries-keys-values-遍历数组"><a href="#7-Array-prototype-entries-keys-values-遍历数组" class="headerlink" title="7. Array.prototype.entries(),keys(),values()___遍历数组"></a>7. Array.prototype.entries(),keys(),values()___遍历数组</h5><ul>
<li><code>用来处理JSON数组</code></li>
<li>都返回一个遍历器对象,用for…of循环进行遍历</li>
<li>keys()是对键名的遍历</li>
<li>values()是对键值的遍历</li>
<li>entries()是对键值对的遍历</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="string">&#x27;a&#x27;</span> , <span class="string">&#x27;b&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="number">1.</span>keys</span><br><span class="line">    <span class="keyword">for</span>( <span class="keyword">let</span> index <span class="keyword">of</span> arr.keys() )&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(index)</span><br><span class="line">        <span class="comment">// &#x27;0&#x27;  ,  &#x27;1&#x27; </span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>values</span><br><span class="line">    <span class="keyword">for</span>( <span class="keyword">let</span> val <span class="keyword">of</span> arr.values() )&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(val)</span><br><span class="line">        <span class="comment">// &#x27;a&#x27; , &#x27;b&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="number">3.</span>entries</span><br><span class="line">    <span class="keyword">for</span>( <span class="keyword">let</span> item <span class="keyword">of</span> arr.entries())&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(item)</span><br><span class="line">        <span class="comment">// &#123; &#x27;0&#x27;:&#x27;a&#x27; &#125;  ,  &#123; &#x27;1&#x27;:&#x27;b&#x27; &#125;</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h5 id="8-Array-prototype-includes-判断数组是否包含参数"><a href="#8-Array-prototype-includes-判断数组是否包含参数" class="headerlink" title="8. Array.prototype.includes()___判断数组是否包含参数"></a>8. Array.prototype.includes()___判断数组是否包含参数</h5><ul>
<li>类似String.prototype.includes() 不过 String下的是ES7方法</li>
</ul>
<p>#####9. ES5/6 处理数组空位</p>
<ul>
<li>ES5处理空位<ul>
<li>forEach(), filter(), every() 和some()都会跳过空位。</li>
<li>map()会跳过空位，但会保留这个值</li>
<li>join()和toString()会将空位视为undefined，而undefined和null会被处理成空字符串</li>
</ul>
</li>
<li>ES6处理空位<ul>
<li>全部做undefined</li>
</ul>
</li>
<li>扩展运算符处理空位<ul>
<li>全部做undefined</li>
</ul>
</li>
</ul>
<p>====================================================================</p>
<h2 id="6-函数扩展"><a href="#6-函数扩展" class="headerlink" title="6- 函数扩展"></a>6- 函数扩展</h2><h5 id="1-参数初始值"><a href="#1-参数初始值" class="headerlink" title="1.参数初始值"></a>1.参数初始值</h5><ul>
<li>在参数列表中 使用等号接收一个值,作为初始值</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span> (<span class="params"> a,b=<span class="number">1</span> </span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(a+b)</span><br><span class="line">&#125;</span><br><span class="line">fn(<span class="number">2</span>) <span class="comment">// 3</span></span><br></pre></td></tr></table></figure>

<h5 id="2函数length属性"><a href="#2函数length属性" class="headerlink" title="2函数length属性"></a>2函数length属性</h5><ul>
<li>返回没有指定默认值的参数</li>
<li>如果设置了参数默认值,函数length属性失真</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">a,b,c</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(fn.length)</span><br><span class="line">&#125;</span><br><span class="line">fn()    <span class="comment">//3</span></span><br><span class="line"><span class="built_in">console</span>.log(fn.length) <span class="comment">//3</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn2</span>(<span class="params">a,b,c=<span class="number">3</span></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(fn2.length)</span><br><span class="line">&#125;</span><br><span class="line">fn2()   <span class="comment">//2 失真</span></span><br><span class="line"><span class="built_in">console</span>.log(fn2.length)  <span class="comment">//2 失真</span></span><br></pre></td></tr></table></figure>

<p>#####3函数的作用域</p>
<ul>
<li>详情见 <code>JS进阶作用域,作用域链</code></li>
</ul>
<h5 id="4扩展运算符"><a href="#4扩展运算符" class="headerlink" title="4扩展运算符"></a>4扩展运算符</h5><ul>
<li>可以用来展开数组</li>
<li>用在函数参数中, 将数组参数转成参数列表</li>
<li><code>合并数组</code></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> ES5旧写法</span><br><span class="line">arr1.concat(arr2)</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span> ES6</span><br><span class="line">[...arr1 , ...arr2]</span><br></pre></td></tr></table></figure>

<h5 id="5-name属性"><a href="#5-name属性" class="headerlink" title="5.name属性"></a>5.name属性</h5><ul>
<li>返回函数的名字(浏览器早就支持了)</li>
</ul>
<h5 id="6-箭头函数"><a href="#6-箭头函数" class="headerlink" title="6.箭头函数"></a>6.箭头函数</h5><ul>
<li><p>省略function关键字,用=&gt; 替代</p>
</li>
<li><p>参数放在箭头前的小括号中</p>
</li>
<li><p>函数体内部如果只有返回值时花括号可以省略</p>
</li>
<li><p>函数内部this指向 声明函数所在环境中的this,不能在内部获取arguments</p>
</li>
<li><p>不能new , call , apply , bind</p>
</li>
<li><p>使用双冒号绑定函数中的this</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>)</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="number">1.</span><span class="comment">//ES5写法</span></span><br><span class="line">fn.call(&#123;<span class="attr">a</span>:<span class="number">1</span>&#125;)</span><br><span class="line"><span class="comment">// &#123;a:1&#125;</span></span><br><span class="line">  </span><br><span class="line"><span class="number">2.</span><span class="comment">//ES6写法</span></span><br><span class="line"><span class="keyword">let</span> o = &#123;<span class="attr">a</span>:<span class="number">1</span>&#125;</span><br><span class="line"><span class="attr">o</span>::fn()</span><br><span class="line"><span class="comment">// &#123;a:1&#125;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="7-函数尾调用"><a href="#7-函数尾调用" class="headerlink" title="7.函数尾调用"></a>7.函数尾调用</h5><ul>
<li>一个函数执行的最后是调用另外一个函数</li>
<li>函数嵌套</li>
<li>外层函数返回值是 另一个函数的调用<ul>
<li>调用帧: 一个函数调用时,在内存中记录该函数局部变量和函数调用位置</li>
<li>调用栈: 函数套函数调用,没有return的函数调用帧会层层记录,叫调用栈</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">不优化写法</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">A</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        B()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">B</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        C()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">C</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    A()</span><br><span class="line">    <span class="comment">/**缺点:</span></span><br><span class="line"><span class="comment">    A执行时会在内存中 记录B的调用位置和其他相关变量</span></span><br><span class="line"><span class="comment">    B执行时会在内存中 继续记录C的调用位置和变量</span></span><br><span class="line"><span class="comment">    等C调用结束才会释放B中记录的内存,继而释放A中的内存. 会造成内存损耗 */</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">尾调用优化写法</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">A</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> B()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">B</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> C()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">C</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    A()</span><br><span class="line">    优点:</span><br><span class="line">    A执行结束遇到<span class="string">`return 函数调用`</span>就会直接释放A函数中的内存记录</span><br></pre></td></tr></table></figure>

<p>#####8.函数尾递归</p>
<ul>
<li>严格模式下有效. ES5下函数内部有arguments和caller</li>
<li>尾调用 + 递归 = 尾递归</li>
<li>递归非常消耗性能, 尾调用可以极大减少函数调用栈的内容.</li>
<li>推荐在递归时使用尾调用,可以避免栈内存溢出</li>
<li>递归改写尾递归:<ul>
<li>1.<code>把局部变量全部提取成参数,把递归逻辑写入参数中</code></li>
<li>2.<code>保证函数最后返回1个自身调用</code></li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 兔子数</span></span><br><span class="line"><span class="number">1.</span>递归写法</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Feib</span>(<span class="params">n</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(n==<span class="number">1</span> ||n==<span class="number">2</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> Feib(n-<span class="number">1</span>)+Feib(n-<span class="number">2</span>)</span><br><span class="line">&#125;</span><br><span class="line">Feib(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>尾递归写法</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Feib</span>(<span class="params">n , num1=<span class="number">1</span> , num0=<span class="number">1</span></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(n&lt;=<span class="number">1</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 返回函数调用, 同时把逻辑写入参数中</span></span><br><span class="line">    <span class="keyword">return</span> Feib( n-<span class="number">1</span> , num0 , num0+num1 )</span><br><span class="line">&#125;</span><br><span class="line">Feib(<span class="number">5</span>,<span class="number">1</span>,<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">----------------------------------------</span><br><span class="line"></span><br><span class="line"><span class="number">3.</span><span class="comment">//强化求阶乘</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Jc</span>(<span class="params">n</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(n==<span class="number">1</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> Jc(n-<span class="number">1</span>) * Jc(n-<span class="number">2</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 尾递归</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Jc</span>(<span class="params"> n , num0=<span class="number">1</span> , num1=<span class="number">2</span> </span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(n&lt;=<span class="number">1</span>)<span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> Jc( n-<span class="number">1</span> , num0-<span class="number">1</span> , num0*num1)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="9-蹦床函数"><a href="#9-蹦床函数" class="headerlink" title="9.蹦床函数"></a>9.蹦床函数</h5><ul>
<li>把递归函数转为循环,防止内存溢出</li>
<li>接收递归函数的调用做参数</li>
<li>只要参数—递归函数调用结果,是个函数就单独返回</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> 保证传入的是递归函数的调用</span><br><span class="line"><span class="number">2.</span> 检测的是递归函数的结果 </span><br><span class="line"><span class="number">3.</span> 如果结果是函数类型,则利用闭包单独返回这个函数</span><br><span class="line"><span class="number">4.</span> !!!特别重要: 在递归函数的返回值修改 内部<span class="built_in">this</span>指向为<span class="literal">null</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">BBoom</span>(<span class="params">dguiFnReturn</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(dguiFnReturn &amp;&amp; dguiFnReturn instanceOf <span class="built_in">Function</span>)&#123;</span><br><span class="line">        dguiFnReturn = dguiFnReturn()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dguiFnReturn</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 累加求和 尾递归</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sumTotal</span>(<span class="params">num , num0 = <span class="number">0</span> , num1 = <span class="number">1</span></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(num &lt;=<span class="number">0</span> )&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sumTotal.bind(<span class="literal">null</span>  , num - <span class="number">1</span> , num0 , num0+num1 )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">BBoom(sumTotal(<span class="number">10</span>))</span><br></pre></td></tr></table></figure>

<h2 id="7-对象扩展"><a href="#7-对象扩展" class="headerlink" title="7- 对象扩展"></a>7- 对象扩展</h2><h5 id="1-对象简写"><a href="#1-对象简写" class="headerlink" title="1.对象简写"></a>1.对象简写</h5><ul>
<li>如果对象属性值是变量,且与属性同名,可以简写</li>
<li>对象方法的 <code>:function</code> 可以省略</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> name = <span class="string">&#x27;xm&#x27;</span></span><br><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">    name,</span><br><span class="line">    <span class="function"><span class="title">say</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="comment">//do smting</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(obj)</span><br><span class="line"><span class="comment">// &#123;name:&#x27;xm&#x27; , say:function()&#123;&#125;&#125;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>CommonJs模块化导出和接收方法很适合简写</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 模块导出</span></span><br><span class="line"><span class="keyword">const</span> $setHeaders = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line"><span class="keyword">const</span> $setResponseData = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123; $setHeaders , $setResponseData &#125;</span><br></pre></td></tr></table></figure>

<h5 id="2-对象全等-Object-is-o1-o2"><a href="#2-对象全等-Object-is-o1-o2" class="headerlink" title="2.对象全等 Object.is(o1,o2)"></a>2.对象全等 Object.is(o1,o2)</h5><ul>
<li><code>==</code>会数据类型转换</li>
<li><code>===</code>判断不能处理NaN: NaN不等于NaN</li>
<li>Object.is(对象1,对象2) 可以判断两个对象是否全等</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> o1 = &#123;<span class="attr">a</span>:<span class="number">1</span>&#125;</span><br><span class="line"><span class="keyword">let</span> o2 = &#123;<span class="attr">a</span>:<span class="number">1</span>&#125;</span><br><span class="line"><span class="keyword">let</span> o3 = o1</span><br><span class="line"><span class="built_in">Object</span>.is(o1, o2) <span class="comment">// false  内容相同,地址不同</span></span><br><span class="line"><span class="built_in">Object</span>.is(o1,o3)  <span class="comment">// true   完全相等</span></span><br><span class="line"><span class="built_in">Object</span>.is(<span class="literal">NaN</span> , <span class="literal">NaN</span>) <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<p>#####3.对象合并 Object.assign(target , o1,o2)</p>
<ul>
<li>将o1,o2的内容 合并到 target中</li>
<li>同名属性后来居上</li>
<li>一个参数返回参数自身</li>
<li>处理数组时会把数组索引当做属性, 即: 同索引值 后面覆盖前面</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>浅拷贝</span><br><span class="line"><span class="keyword">let</span> target = &#123;<span class="attr">a</span>:<span class="number">1</span>&#125;</span><br><span class="line"><span class="keyword">let</span> o1 = &#123;<span class="attr">b</span>:<span class="number">2</span>&#125;</span><br><span class="line"><span class="keyword">let</span> o2 = &#123;<span class="attr">c</span>:<span class="number">3</span>&#125;</span><br><span class="line"><span class="built_in">Object</span>.assign( target, o1 , o2  )</span><br><span class="line"><span class="built_in">console</span>.log(target) <span class="comment">// &#123; a:1 ,b:2 ,c:3&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>处理数组</span><br><span class="line"><span class="keyword">let</span> arr1= [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="keyword">let</span> arr2 = [<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line"><span class="keyword">let</span> target2 = <span class="built_in">Object</span>.assgin(target2 , arr1 , arr2)</span><br><span class="line"><span class="built_in">console</span>.log(target2) <span class="comment">// [4,5,3]</span></span><br></pre></td></tr></table></figure>
<h5 id="4-对象解构"><a href="#4-对象解构" class="headerlink" title="4.对象解构"></a>4.对象解构</h5><ul>
<li>对象解构赋值,解构要放最后.否则报错</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123;x , y , z &#125; = &#123; <span class="attr">x</span>:<span class="number">1</span> , <span class="attr">y</span>:<span class="number">2</span> , <span class="attr">a</span>:<span class="number">3</span> , <span class="attr">b</span>:<span class="number">4</span>&#125;</span><br><span class="line"><span class="comment">// x 1</span></span><br><span class="line"><span class="comment">// y 2</span></span><br><span class="line"><span class="comment">// z &#123;a:3 , b:4&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="8-Symbol类型"><a href="#8-Symbol类型" class="headerlink" title="8- Symbol类型"></a>8- Symbol类型</h2><ul>
<li>独一无二的值</li>
<li>传统对象属性都是字符串,添加方法和名字的时候有可能重名,使用Symbol类型可以保证唯一性</li>
<li>JS 7 种数据类型: String Boolean Number Null Undefined Object Symbol</li>
<li>Symbol类型创建不能使用new! 不是对象,但像字符串</li>
<li>Symbol类型可以转字符串,不能转数字(不能做运算)</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">创建一个<span class="built_in">Symbol</span>数据</span><br><span class="line"><span class="number">1.</span><span class="comment">// Symbol调用 多个Symbol类型数据不容易区分</span></span><br><span class="line"><span class="keyword">let</span> s0 = <span class="built_in">Symbol</span>()</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span><span class="comment">// Symbol调用 加参数 进行描述.  参数只是描述作用/区分别的Symbol</span></span><br><span class="line"><span class="keyword">let</span> s1 = <span class="built_in">Symbol</span>(<span class="string">&#x27;a&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> s2 = <span class="built_in">Symbol</span>(<span class="string">&#x27;b&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> s3 = <span class="built_in">Symbol</span>(<span class="string">&#x27;b&#x27;</span>)</span><br><span class="line">s1.toString() <span class="comment">// &#x27;Symbol(a)&#x27;</span></span><br><span class="line">s2.toString() <span class="comment">// &#x27;Symbol(b)&#x27;</span></span><br><span class="line">s3.toString() <span class="comment">// &#x27;Symbol(b)&#x27;</span></span><br><span class="line">s2和s3都是使用b进行描述,但是s2和s3永远不相等</span><br><span class="line">s2 === s3 <span class="comment">//false</span></span><br></pre></td></tr></table></figure>
<p><strong>Symbol()给对象做属性</strong></p>
<ul>
<li>没有重名覆盖的问题</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">需要: 我们有个不知道有多少属性和方法的对象Obj添加fn方法</span><br><span class="line"></span><br><span class="line"><span class="comment">// 错误的Symbol写法</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="built_in">Symbol</span>()</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    <span class="attr">a</span>:<span class="number">1</span> <span class="comment">// 这种写法a表示字符串,所以下面obj[a] 是undefined , obj[&#x27;a&#x27;]是1</span></span><br><span class="line">&#125;</span><br><span class="line">obj[a]<span class="comment">// undefined</span></span><br><span class="line">obj[<span class="string">&#x27;a&#x27;</span>] <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 正确的Symbol写法</span></span><br><span class="line"><span class="keyword">let</span> b = <span class="built_in">Symbol</span>()</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    [b]:<span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line">obj[b]  <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>
<h2 id="9-Set类型"><a href="#9-Set类型" class="headerlink" title="9- Set类型"></a>9- Set类型</h2><ul>
<li>可以理解成项不能重复的数组</li>
<li>内容长度 new Set().size</li>
<li>1.接收伪数组/数组创建set</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> s = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">1</span>,,<span class="number">1</span>,<span class="number">1</span>,<span class="number">2</span>])</span><br><span class="line"><span class="comment">// s === [1,undefiend,2]</span></span><br></pre></td></tr></table></figure>

<ul>
<li>2.处理数组/伪数组去重</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">1</span>]</span><br><span class="line"><span class="keyword">let</span> s = <span class="keyword">new</span> <span class="built_in">Set</span>(arr)</span><br><span class="line"><span class="comment">// 1</span></span><br><span class="line"><span class="keyword">let</span> newArr = <span class="built_in">Array</span>.from(s)</span><br><span class="line"><span class="comment">// 2</span></span><br><span class="line"><span class="keyword">let</span> newArr = [...new <span class="built_in">Set</span>(arr)]</span><br><span class="line"></span><br><span class="line">newArr === [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br></pre></td></tr></table></figure>

<ul>
<li>3.实例内容操作方法</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span><span class="comment">// 添加内容 add 返回Set结构</span></span><br><span class="line"><span class="keyword">let</span> s = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>])</span><br><span class="line">s.add(<span class="number">5</span>)</span><br><span class="line"><span class="number">2</span><span class="comment">// 删除内容 delete 返回布尔值</span></span><br><span class="line">s.delete(<span class="number">2</span>)</span><br><span class="line"><span class="number">3</span><span class="comment">// 检测内容 has  返回布尔值</span></span><br><span class="line">s.has(<span class="number">1</span>)</span><br><span class="line"><span class="number">4</span><span class="comment">// 清空内容 clear 没有返回值</span></span><br><span class="line">s.clear()</span><br></pre></td></tr></table></figure>

<ul>
<li>4.实例遍历操作<ul>
<li>.keys()</li>
<li>.values()</li>
<li>.entries()</li>
<li>.forEach()</li>
<li>.map()</li>
<li>.filter()</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> s = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>])</span><br><span class="line"><span class="number">1</span><span class="comment">// Set数据结构没有键名, 所以keys() 和 values() 返回的都是值Iterator</span></span><br><span class="line">.keys()  .values()</span><br><span class="line"><span class="number">2</span><span class="comment">// entries() 返回的是对象项组成的Iterator. 键值对是匿名函数</span></span><br><span class="line"><span class="keyword">let</span> s = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])</span><br><span class="line">s.entries()</span><br><span class="line"><span class="comment">// SetIterator( &#123;1=&gt;1&#125; , &#123;2=&gt;2&#125; , &#123;3=&gt;3&#125; )</span></span><br><span class="line"><span class="number">3</span><span class="comment">//forEach , map , filter 和数组中使用相同</span></span><br></pre></td></tr></table></figure>
<h2 id="10-Map类型"><a href="#10-Map类型" class="headerlink" title="10- Map类型"></a>10- Map类型</h2><ul>
<li>对象在储存数据的时候只能允许字符串做属性</li>
<li>Map数据允许任意数据类型做属性.</li>
<li>初始化Map: 空参数 或 二维数组</li>
<li>基于浏览器的支持清空选择使用Set和Map</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> m = <span class="keyword">new</span> <span class="built_in">Map</span>()</span><br><span class="line"><span class="keyword">var</span> m2 = <span class="keyword">new</span> <span class="built_in">Map</span>([</span><br><span class="line">    [<span class="number">1</span>,<span class="string">&#x27;a&#x27;</span>]</span><br><span class="line">    ,[<span class="number">2</span>,<span class="string">&#x27;b&#x27;</span>]</span><br><span class="line">    ,[<span class="number">3</span>,<span class="string">&#x27;c&#x27;</span>]</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line"><span class="comment">// m2 === &#123;1 =&gt; &quot;a&quot;, 2 =&gt; &quot;b&quot;, 3 =&gt; &quot;c&quot;&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="11-Proxy和Reflect"><a href="#11-Proxy和Reflect" class="headerlink" title="11- Proxy和Reflect"></a>11- Proxy和Reflect</h2><h5 id="Reflect对象"><a href="#Reflect对象" class="headerlink" title="Reflect对象"></a>Reflect对象</h5><ul>
<li><p>未来对象属性方法只添加到Reflect上</p>
</li>
<li><p>与Object很像,做了很多优化</p>
<ul>
<li>Reflect.defineProperty() 优化了参数对象不能设置属性时的报错行为.</li>
<li>Reflect.has(target , key) 检测target中是否存在key,返回布尔值. 有返回值 ,优化了 Object的 in 关键字</li>
<li>Reflect.deleteProperty(target , key) 删除target中的key属性. 有返回值, 优化了 Object的 delete关键字</li>
<li>Reflect.get(target , key , this指向对象)</li>
<li>Reflect.set(target , key , value , this指向对象)</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Reflect</span>.get</span><br><span class="line">  </span><br><span class="line"><span class="keyword">let</span> o1 = &#123;</span><br><span class="line">    <span class="attr">a</span>:<span class="number">1</span>,</span><br><span class="line">    <span class="keyword">get</span> <span class="title">f1</span>()&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>.a)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">let</span> o2 = &#123;</span><br><span class="line">    <span class="attr">a</span>:<span class="number">2</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">Reflect</span>.get( o1 , <span class="string">&#x27;f1&#x27;</span> , o2 ) <span class="comment">// 2  修改o1内部f1函数调用时的this指向,为o2</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="Proxy对象"><a href="#Proxy对象" class="headerlink" title="Proxy对象"></a>Proxy对象</h5><ul>
<li><p>在操作对象之前必须要调用的一个代理. 属于元编程</p>
</li>
<li><p>Proxy构造有两个参数</p>
<ul>
<li>target : 拦截的对象</li>
<li>handler : 拦截发生时的操作</li>
</ul>
</li>
<li><p>Proxy如果要起作用,一定要操作Proxy的实例</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> 所有属性拦截</span><br><span class="line"><span class="keyword">let</span> obj = &#123;&#125;</span><br><span class="line">obj = <span class="keyword">new</span> <span class="built_in">Proxy</span>(obj, &#123;</span><br><span class="line">    <span class="function"><span class="title">get</span>(<span class="params"> target , property </span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">35</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">proxy.a <span class="comment">//35</span></span><br><span class="line">proxy.b <span class="comment">//35</span></span><br></pre></td></tr></table></figure></li>
<li><p>拦截器操作属性一览</p>
<ul>
<li>get( target , name , dataObj ){}<ul>
<li>获取Proxy实例属性时触发调用</li>
<li>target 代理对象</li>
<li>name 操作属性</li>
<li>dataObj 如果需要修改this指向,提供数据的的this对象</li>
</ul>
</li>
<li>set(target , name , value , dataObj){}<ul>
<li>设置Proxy实例属性值触发</li>
<li>value 修改传入的新值</li>
</ul>
</li>
<li>has(target , name)<ul>
<li>检测target中是否函数name属性</li>
</ul>
</li>
<li>deleteProperty( target , name )<ul>
<li>删除target中name属性</li>
</ul>
</li>
<li>ownKeys(target)<ul>
<li>返回target中所有可以遍历的属性. Object.keys()只返回可遍历的</li>
</ul>
</li>
<li>applay(target , this指向对象, 实参伪数组 ){}<ul>
<li>调用Proxy实例(做函数调用)时触发</li>
</ul>
</li>
<li>construct(target , 实参伪数组){}<ul>
<li>把Proxy实例做构造函数(new px实例)时触发</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> handler = &#123;</span><br><span class="line">    <span class="function"><span class="title">get</span>(<span class="params">target , propertyName</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(propertyName === <span class="string">&#x27;prototye&#x27;</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">Object</span>.prototype</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> target[propertyName]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">set</span>(<span class="params">target , propertyName , value </span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>( propertyName === <span class="string">&#x27;age&#x27;</span> &amp;&amp; <span class="built_in">Number</span>.isInteger(value) )&#123;</span><br><span class="line">            target[propertyName] = value</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">apply</span>(<span class="params">target ,thisBinding, args</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;做函数调用&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">construct</span>(<span class="params">target , args</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> &#123; <span class="attr">name</span>:<span class="string">&#x27;做构造&#x27;</span> , <span class="attr">value</span>:args[<span class="number">0</span>] &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> proxy = <span class="keyword">new</span> <span class="built_in">Proxy</span>(&#123;<span class="attr">a</span>:<span class="number">1</span>&#125;, handler)</span><br><span class="line"></span><br><span class="line">proxy.prototype === <span class="built_in">Object</span>.prototype <span class="comment">// true</span></span><br><span class="line">proxy.a <span class="comment">// 1</span></span><br><span class="line">proxy() <span class="comment">// 做函数调用</span></span><br><span class="line"><span class="keyword">new</span> proxy(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>) <span class="comment">// &#123; name:&#x27;做构造&#x27; , &#x27; value: 1&#x27;&#125;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>Proxy拦截操作属性函数内的this 指向 当前proxy实例</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">    <span class="function"><span class="title">f1</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> proxy = <span class="keyword">new</span> <span class="built_in">Proxy</span>(obj , &#123;</span><br><span class="line">    <span class="function"><span class="title">get</span>(<span class="params">target , name</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(name === <span class="string">&#x27;f1&#x27;</span>)&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="built_in">this</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">obj.f1() <span class="comment">// obj</span></span><br><span class="line">proxy.f1() <span class="comment">// proxy</span></span><br></pre></td></tr></table></figure>

<h5 id="使用Proxy完成观察者"><a href="#使用Proxy完成观察者" class="headerlink" title="使用Proxy完成观察者"></a>使用Proxy完成观察者</h5><ol>
<li>给obj添加get拦截器,所有使用对象Obj的更新函数 ,存放在 updateSets中</li>
<li>给obj添加set拦截器,拦截器中调用updateSets中的更新函数</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span><span class="comment">// 准备观察者函数集合</span></span><br><span class="line"><span class="keyword">let</span> updateSets = <span class="keyword">new</span> <span class="built_in">Set</span>()</span><br><span class="line"> <span class="comment">// 更新数据函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">updateDom</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line"><span class="number">2</span><span class="comment">// 准备对象obj</span></span><br><span class="line"><span class="keyword">let</span> obj = &#123; <span class="attr">name</span>:<span class="string">&#x27;zs&#x27;</span> &#125;</span><br><span class="line"><span class="number">3</span><span class="comment">// 给obj添加拦截器, </span></span><br><span class="line">obj = <span class="keyword">new</span> <span class="built_in">Proxy</span>(obj , &#123;</span><br><span class="line">    <span class="number">4</span><span class="comment">// 使用obj的就添加到updateSets中</span></span><br><span class="line">    <span class="function"><span class="title">get</span>(<span class="params">target , property , dataObj</span>)</span>&#123;</span><br><span class="line">        <span class="number">5</span><span class="comment">// 保证obj的属性值正常获取</span></span><br><span class="line">        <span class="built_in">Reflect</span>.get(target , proterty , dataObj)</span><br><span class="line">        <span class="number">6</span><span class="comment">// 收集监视者</span></span><br><span class="line">        updateSets.add(updateDom1)</span><br><span class="line">    &#125;   </span><br><span class="line"></span><br><span class="line">    <span class="number">7</span> <span class="comment">//修改set做数据更新调用</span></span><br><span class="line">    <span class="function"><span class="title">set</span>(<span class="params">target , property , value , dataObj</span>)</span>&#123;</span><br><span class="line">        <span class="number">8</span> <span class="comment">// 保证正常数据修改</span></span><br><span class="line">        <span class="built_in">Reflect</span>( target , property , value , dataObj )</span><br><span class="line">        <span class="number">9</span> <span class="comment">// 触发数据更新 , 把sets中存放的所有数据更新函数 都触发一遍</span></span><br><span class="line">        updateSets.forEach(<span class="function">(<span class="params">itemFn</span>)=&gt;</span>&#123;</span><br><span class="line">            itemFn()</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>##12- Symbol在单例模式中使用</p>
<ul>
<li>模块文件被任意引用时都返回同一个实例</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// commonjs模块内:</span></span><br><span class="line"><span class="comment">// 1 准备构造</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">A</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line"><span class="comment">// 2 判断全局环境中存不存在A实例, 如果有就直接返回, 如果没有就创建</span></span><br><span class="line"><span class="keyword">if</span>(!<span class="built_in">global</span>.a)&#123;</span><br><span class="line">    <span class="built_in">global</span>.a = <span class="keyword">new</span> A()</span><br><span class="line">&#125;</span><br><span class="line">moduel.exports = <span class="built_in">global</span>.a</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">单例模式的问题:<span class="comment">// 上面写法,在全局添加容易出现覆盖问题:所以要使用Symbol做属性</span></span><br><span class="line"><span class="keyword">const</span> a = <span class="built_in">Symbol</span>(<span class="string">&#x27;a&#x27;</span>)</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">A</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line"><span class="keyword">if</span>(!<span class="built_in">global</span>[a])&#123;</span><br><span class="line">    <span class="built_in">global</span>[a] = <span class="keyword">new</span> A()</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">module</span>.exports = <span class="built_in">global</span>[a]</span><br></pre></td></tr></table></figure>

<h2 id="13-Iterator"><a href="#13-Iterator" class="headerlink" title="13- Iterator"></a>13- Iterator</h2><ul>
<li>遍历数组根据索引</li>
<li>遍历SetMap不根据索引</li>
<li>为了统一 Array,Set,Map都属于Iterator</li>
<li>Iterator数据都可以使用for..of遍历</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">遍历数组,<span class="built_in">Set</span>,<span class="built_in">Map</span></span><br><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="keyword">let</span> set = <span class="keyword">new</span> <span class="built_in">Set</span>(arr)</span><br><span class="line"><span class="keyword">let</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>([ [<span class="number">1</span>,<span class="string">&#x27;a&#x27;</span>] , [<span class="number">2</span>,<span class="string">&#x27;b&#x27;</span>] ])</span><br><span class="line"></span><br><span class="line"><span class="number">1</span> 都可以使用forEach(<span class="function"><span class="keyword">function</span>(<span class="params">item, index</span>)</span>&#123;&#125;)</span><br><span class="line">    map和set没有索引, 所以item和index都是值</span><br><span class="line"></span><br><span class="line">    arr.forEach(<span class="function">(<span class="params">item,i</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(item , i )</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">// 0 1 ; 12 ; 23</span></span><br><span class="line"></span><br><span class="line">    set.forEach(<span class="function">(<span class="params">value</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(value)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">// 1 2 3 </span></span><br><span class="line"></span><br><span class="line">    map.forEach(<span class="function">(<span class="params">value,attr</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(value,attr)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">// 1 &#x27;a&#x27; ; 2 &#x27;b&#x27; ; </span></span><br><span class="line"></span><br><span class="line"><span class="number">2</span> 都可以使用<span class="keyword">for</span>...of循环 </span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>( item <span class="keyword">of</span> Iterator )&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(item)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="14-Generator函数"><a href="#14-Generator函数" class="headerlink" title="14- Generator函数"></a>14- Generator函数</h2><h5 id="1-生成器作用"><a href="#1-生成器作用" class="headerlink" title="1.生成器作用"></a>1.生成器作用</h5><ul>
<li>将代码进行分段部署,Generator中使用yield 和 return 表示各个阶段的代码内容</li>
<li>Generator函数返回的Iterator对象</li>
<li>使用Generator生成的生成器配合next() 把内部代码 分阶段调用(惰性调用)</li>
<li>写法: function*fn(){}, *位置没有固定要求, 只要在function和函数名之间就可以</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">status1</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;状态1触发&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">status2</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;状态2触发&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">genera</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">yield</span> status1()</span><br><span class="line">    <span class="keyword">yield</span> status2()</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">console</span>.log(<span class="string">&#x27;全部都触发了&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> gene = genera()</span><br><span class="line">gene.next() <span class="comment">// 状态1触发</span></span><br><span class="line">gene.next() <span class="comment">// 状态2触发</span></span><br><span class="line">gene.next() <span class="comment">// 全部都触发了</span></span><br></pre></td></tr></table></figure>

<h5 id="2-yield语句和return语句的区别"><a href="#2-yield语句和return语句的区别" class="headerlink" title="2.yield语句和return语句的区别:"></a>2.yield语句和return语句的区别:</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">* 每次next调用都返回 yield或return后面表达式的值</span><br><span class="line">* yield语句可以有多个,可以多次触发</span><br><span class="line">* yield语句不能使用在普通函数中</span><br><span class="line">* yield在语句中使用时需要放在小括号里</span><br><span class="line">* return 语句可以有多个,只触发一次</span><br><span class="line">* return 语句可以使用在普通函数中</span><br></pre></td></tr></table></figure>

<h5 id="3-Generator函数内阶段代码不next不执行"><a href="#3-Generator函数内阶段代码不next不执行" class="headerlink" title="3.Generator函数内阶段代码不next不执行"></a>3.Generator函数内阶段代码不next不执行</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>] , [<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>] , [<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>]]</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">f1</span>(<span class="params">arr</span>)</span>&#123;</span><br><span class="line">    arr.forEach(<span class="function">(<span class="params">item,index</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">typeof</span> item === <span class="string">&#x27;number&#x27;</span>)&#123;</span><br><span class="line">            <span class="keyword">yield</span> item</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">yield</span>* f1(item)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">f1(arr)</span><br><span class="line"><span class="comment">// 报错:  forEach的回调是普通函数,内部不允许使用yield</span></span><br><span class="line"></span><br><span class="line">修改为:</span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">f1</span>(<span class="params">arr</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span> ; i &lt; arr.length ; i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>( <span class="keyword">typeof</span> arr[i] === <span class="string">&#x27;number&#x27;</span>)&#123;</span><br><span class="line">            <span class="keyword">yield</span> arr[i]</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">yield</span>* f1(arr[i])</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> f <span class="keyword">of</span> f1(arr)) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(f);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 1, 2, 3, 4, 5, 6</span></span><br></pre></td></tr></table></figure>

<h5 id="4-next传参机制"><a href="#4-next传参机制" class="headerlink" title="4.next传参机制"></a>4.next传参机制</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">- 如果Generator函数需要参数, 在next调用的时候如果没有参数,则上个次yield的结果就是undefined</span><br><span class="line">    function* genera(num)&#123;</span><br><span class="line">        var x = (yield num + 10)</span><br><span class="line">        var y = (yield 2 * x)</span><br><span class="line">        var z = (yield y+1)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    let gene = genera()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    gene.next(10) </span><br><span class="line">    // 执行到第一阶段 yield返回值是20</span><br><span class="line"></span><br><span class="line">    gene.next()     </span><br><span class="line">    // 执行第二阶段, 没有参数:上次yield结果表示undefined</span><br><span class="line">    1// 本次next没有传参,表示上次yield的结果是undefined,  </span><br><span class="line">    2// 即 x = yield undefined;  </span><br><span class="line">    3// yield接收的是 undefined * 2 === NaN</span><br><span class="line"></span><br><span class="line">    gene.next(10)</span><br><span class="line">    // 执行第三阶段, 参数10 表示上阶段执行结果是10</span><br><span class="line">    // 继续执行:  var y = 10</span><br><span class="line">    // 本阶段结束: yield 10+1 , 结果是11</span><br><span class="line">    // yiled左侧等号部分 不执行,等待下次next调用</span><br></pre></td></tr></table></figure>

<h5 id="5-for-of处理Generator"><a href="#5-for-of处理Generator" class="headerlink" title="5.for..of处理Generator"></a>5.for..of处理Generator</h5><ul>
<li>生成器的next调用 或者 配置 for..of执行时返回值为: {value:yield表达式值 , done:是否执行到了return}</li>
<li>如果执行到了return语句 done的值就是true ; for..of语句执行遇到done为true就结束循环.</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">genera</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">yield</span> <span class="number">2</span></span><br><span class="line">    <span class="keyword">yield</span> <span class="number">3</span></span><br><span class="line">    <span class="keyword">yield</span> <span class="number">4</span></span><br><span class="line">    <span class="keyword">yield</span> <span class="number">5</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">6</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>( <span class="keyword">let</span> stateVal <span class="keyword">of</span> genera())&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(stateVal)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 1 2 3 4 5 </span></span><br><span class="line"><span class="comment">// for...of 执行遇到done值为true 结束循环</span></span><br></pre></td></tr></table></figure>

<h5 id="6-Generator-for-of实现斐波那契"><a href="#6-Generator-for-of实现斐波那契" class="headerlink" title="6.Generator+for..of实现斐波那契"></a>6.Generator+for..of实现斐波那契</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">fibonacci</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> [prev, curr] = [<span class="number">0</span>, <span class="number">1</span>];</span><br><span class="line">  <span class="keyword">for</span> (;;) &#123;</span><br><span class="line">    [prev, curr] = [curr, prev + curr];</span><br><span class="line">    <span class="keyword">yield</span> curr;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> n <span class="keyword">of</span> fibonacci()) &#123;</span><br><span class="line">  <span class="keyword">if</span> (n &gt; <span class="number">1000</span>) <span class="keyword">break</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(n);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="7-yield-语法"><a href="#7-yield-语法" class="headerlink" title="7.yield*语法"></a>7.yield*语法</h5><ul>
<li>在一个Generator函数调用其他Generator函数默认不生效</li>
<li>使用 yield* genera() 可以调用</li>
</ul>
<h2 id="15-Promise"><a href="#15-Promise" class="headerlink" title="15- Promise"></a>15- Promise</h2><h5 id="1-简单理解"><a href="#1-简单理解" class="headerlink" title="1.简单理解:"></a>1.简单理解:</h5><ul>
<li>存放未来的异步函数调用的容器</li>
<li>按照语法让异步操作更简单</li>
<li>特点:<ol>
<li>状态独立,pendding , resolved , rejected,三种状态自身决定</li>
<li>状态一旦改变不能再改变. 状态确定了之后任意时间段获取状态值都是固定的.</li>
</ol>
</li>
</ul>
<h5 id="2-语法"><a href="#2-语法" class="headerlink" title="2.语法:"></a>2.语法:</h5><ul>
<li>实例化</li>
<li>将异步操作放在Promise容器中</li>
<li>根据本次异步操作的结果设置状态</li>
<li>成功状态会顺序调用.then()并传参</li>
<li>失败状态会直接调用.catch()</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p = <span class="keyword">new</span> <span class="function"><span class="title">Promise</span>(<span class="params">resovle , reject</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> xhr = <span class="keyword">new</span> XMLHttpRquest()</span><br><span class="line">    <span class="comment">// xhr.open xhr.setRequestHeader() </span></span><br><span class="line">    xhr.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(xhr.status == <span class="number">200</span>)&#123;</span><br><span class="line">            resolve(<span class="built_in">JSON</span>.parse(xhr.responseText))</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            reject(<span class="string">&#x27;netWork Error&#x27;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">p.</span><br><span class="line">then(<span class="function">(<span class="params">resdata</span>)=&gt;</span>&#123;</span><br><span class="line">    template(<span class="string">&#x27;id&#x27;</span> , resdata)</span><br><span class="line">&#125;)</span><br><span class="line">.catch(<span class="function">(<span class="params">errorInfo</span>)=&gt;</span>&#123;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h5 id="Promise-all-批量接收"><a href="#Promise-all-批量接收" class="headerlink" title="Promise.all() 批量接收"></a>Promise.all() 批量接收</h5><ul>
<li>将多个promise实例包装成一个新的promise</li>
<li>多个参数promise状态都为fullfilled,新的promsie会接收参数promise中resovle传参组成的数组</li>
<li>只要参数promise中有一个rejected , 新的promise状态就是promised</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 3个Promise实例, p1,p2,p3</span></span><br><span class="line"><span class="keyword">let</span> pAll = <span class="built_in">Promise</span>.all([p1,p2,p3])</span><br></pre></td></tr></table></figure>

<p>#####Promise.race() 优先接收</p>
<ul>
<li>多个promise实例包装成一个新的promise</li>
<li>结果promise接收参数promise中最早完成resolved状态</li>
</ul>
<h5 id="Promise-resolve"><a href="#Promise-resolve" class="headerlink" title="Promise.resolve()"></a>Promise.resolve()</h5><ul>
<li>将一个对象包装成promise</li>
<li>基本实现</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Promise</span>.resolve($.ajax(<span class="string">&#x27;/a&#x27;</span>))</span><br><span class="line">等价于</span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> resolve($.ajax(<span class="string">&#x27;/a&#x27;</span>)))</span><br></pre></td></tr></table></figure>

<ul>
<li><p>参数组成:</p>
<ol>
<li>参数是promise实例</li>
<li>参数是thenable对象(有then方法的对象)</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">如:</span><br><span class="line"><span class="keyword">let</span> o = &#123;</span><br><span class="line">    <span class="function"><span class="title">then</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li><p>参数是一个原始值,或者不含then方法. 此时会直接将promise状态锁定为resolved</p>
</li>
<li><p>不带参数. 为了获取到一个promise实例,可以直接使用Promise.resolve()</p>
<ul>
<li>注意:<code>立即resolve的promise实例,是在本次事件循环结束执行,而不是下次事件队列首部</code></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.setTimeout(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">1</span>)</span><br><span class="line">&#125;,<span class="number">0</span>)</span><br><span class="line"><span class="built_in">Promise</span>.resolve().then(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">2</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">3</span>)</span><br><span class="line">     </span><br><span class="line">触发: <span class="number">3</span> <span class="number">2</span> <span class="number">1</span></span><br><span class="line">主线程执行--<span class="number">3</span></span><br><span class="line">本轮事件执行结束--<span class="number">2</span></span><br><span class="line">下次事件循环开始--<span class="number">1</span></span><br></pre></td></tr></table></figure></li>
</ol>
</li>
</ul>
<h5 id="Promise-prototype-finally实现"><a href="#Promise-prototype-finally实现" class="headerlink" title="Promise.prototype.finally实现"></a>Promise.prototype.finally实现</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 目的,不论如何都要执行finally的callback</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Promise</span>.prototype.finally = <span class="function"><span class="keyword">function</span>(<span class="params">callback</span>)</span>&#123;</span><br><span class="line">    <span class="comment">//在内部创建一个Promise实例</span></span><br><span class="line">    <span class="comment">// 通过本次实例调用callback</span></span><br><span class="line">    <span class="keyword">let</span> <span class="title">constructor</span> = <span class="title">this</span>.<span class="title">constructor</span></span><br><span class="line">    <span class="title">Promise</span>.<span class="title">resolve</span>(<span class="params"></span>).<span class="title">then</span>(<span class="params">callback</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="Promise-Generator"><a href="#Promise-Generator" class="headerlink" title="Promise+Generator"></a>Promise+Generator</h5><ul>
<li>Generator管理函数流程,遇到异步操作时一般返回Promise实例</li>
</ul>
<h2 id="16-Async和异步操作"><a href="#16-Async和异步操作" class="headerlink" title="16- Async和异步操作"></a>16- Async和异步操作</h2><h5 id="1-异步编程的方式"><a href="#1-异步编程的方式" class="headerlink" title="1.异步编程的方式"></a>1.异步编程的方式</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">1. 回调</span><br><span class="line">    - 回调地狱</span><br><span class="line">2. 事件监听</span><br><span class="line">3. 发布订阅</span><br><span class="line">4. Promise</span><br><span class="line">    - 一堆then,语意不明</span><br><span class="line">5. Generator</span><br><span class="line">    - 将异步的各个阶段声明在Generator的各个yield中,分步骤调用Generator函数</span><br><span class="line">    - 从各个阶段返回的指针对象&#123; value, done&#125; 获取数据</span><br><span class="line">    - 暂停执行: yield</span><br><span class="line">    - 回复执行: next</span><br><span class="line">    - `流程管理`很不方便</span><br><span class="line">5. Async</span><br></pre></td></tr></table></figure>

<h5 id="2-异步的理解"><a href="#2-异步的理解" class="headerlink" title="2. 异步的理解"></a>2. 异步的理解</h5><ul>
<li>将一个任务分成两个阶段执行, 第一阶段执行结束就执行第二阶段需要的准备工作, 等第二阶段的准备工作完成再执行第二阶段</li>
<li>如: 浏览器向服务器请求一批数据, 在数据响应之前浏览器继续解析DOM,CSS,当数据返回时继续处理数据</li>
<li>相对而言:同步就是浏览器请求数据时,在数据响应之前什么都不做</li>
</ul>
<h5 id="3-async的原理"><a href="#3-async的原理" class="headerlink" title="3.async的原理"></a>3.async的原理</h5><ul>
<li>async就是Generator的语法糖</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">依次读取两个文件</span><br><span class="line"></span><br><span class="line"><span class="comment">// 引入node文件读取模块</span></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"><span class="comment">// 文件读取函数封装</span></span><br><span class="line"><span class="keyword">var</span> readFile = <span class="function"><span class="keyword">function</span>(<span class="params">fileName</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve , reject</span>)=&gt;</span>&#123;</span><br><span class="line">        fs.readFile(fileName , <span class="function">(<span class="params">err,data</span>)=&gt;</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(err) reject(err)</span><br><span class="line">            resolve(data)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="number">1</span> <span class="comment">// async写法</span></span><br><span class="line"><span class="keyword">let</span> readFile = <span class="keyword">async</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> f1 = <span class="keyword">await</span> fs.readFile(<span class="string">&#x27;/a.js&#x27;</span>)</span><br><span class="line">    <span class="keyword">var</span> f2 = <span class="keyword">await</span> fs.readFile(<span class="string">&#x27;/b.js&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="number">2</span> <span class="comment">// Generator写法</span></span><br><span class="line"><span class="keyword">var</span> gen = <span class="function"><span class="keyword">function</span>* (<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> f1 = <span class="keyword">yield</span> readFile(<span class="string">&#x27;/a.js&#x27;</span>)</span><br><span class="line">    <span class="keyword">var</span> f2 = <span class="keyword">yield</span> readFile(<span class="string">&#x27;/b.js&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>总结:</p>
<ul>
<li>async就是把Generator的<code>*</code>换成了<code>async</code>, 把<code>yield</code>换成了<code>await</code></li>
<li>async就是含有多个异步操作的Promise实例.await就是内部异步操作间关联的then</li>
</ul>
</li>
<li><p>使用规则:</p>
<ol>
<li>async包装的函数执行结果是个Promise对象, async包装函数中的return的是resolve的参数</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">123</span></span><br><span class="line">&#125;</span><br><span class="line">f1()</span><br><span class="line">.then(<span class="function">(<span class="params">data</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 打印123</span></span><br></pre></td></tr></table></figure>

<ol>
<li>async修饰函数执行结果Promise对象,必须要等到内部所有的await执行结束才能确定最终状态<br>也就是: async修饰函数内所有的await执行结束,才能执行then的回调</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">f2</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">await</span> <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">2</span></span><br><span class="line">    &#125;,<span class="number">1000</span>)</span><br><span class="line">&#125;</span><br><span class="line">f2()</span><br><span class="line">.then(<span class="function"><span class="params">data</span>=&gt;</span><span class="built_in">console</span>.log(data))</span><br><span class="line">  </span><br><span class="line">打印<span class="number">1</span>  </span><br><span class="line"><span class="number">1</span>秒后打印<span class="number">2</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="17-Class类"><a href="#17-Class类" class="headerlink" title="17- Class类"></a>17- Class类</h2><ul>
<li>因为Js是面向过程语言, 原生面向过程的语言如: java,php的特性都不原生支持</li>
<li>面向对象3大特性:<ul>
<li>封装</li>
<li>继承</li>
<li>多态</li>
</ul>
</li>
<li>Js只能模拟, 所以推出了Class’类’的定义: 本质是用object.prototype进行模拟</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">原生:</span><br><span class="line">	<span class="number">1</span>, 使用构造函数+<span class="keyword">new</span> 创建对象:</span><br><span class="line">	<span class="function"><span class="keyword">function</span> <span class="title">Cars</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">		<span class="built_in">this</span>.name = name</span><br><span class="line">		<span class="built_in">this</span>.price = price</span><br><span class="line">	&#125;</span><br><span class="line">	Cars.prototype.run = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="built_in">console</span>.log(<span class="built_in">this</span>.name+<span class="string">&#x27;轰轰轰&#x27;</span>)&#125;</span><br><span class="line">	</span><br><span class="line"></span><br><span class="line">	<span class="number">2</span>, 使用Class关键字</span><br><span class="line">	<span class="class"><span class="keyword">class</span> <span class="title">Cars</span> </span>&#123;</span><br><span class="line">		<span class="function"><span class="title">constructor</span>(<span class="params">name</span>)</span>&#123;	<span class="comment">// 构造函数</span></span><br><span class="line">			<span class="built_in">this</span>.name = name</span><br><span class="line">		&#125;,</span><br><span class="line">		<span class="comment">// 原型方法</span></span><br><span class="line">		<span class="function"><span class="title">run</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">			<span class="built_in">console</span>.log(<span class="built_in">this</span>.name+<span class="string">&#x27;轰轰轰&#x27;</span>)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	使用</span><br><span class="line">	<span class="keyword">let</span> volvo = <span class="keyword">new</span> Cars(<span class="string">&#x27;沃尔沃&#x27;</span>)</span><br><span class="line">	volor.run()</span><br></pre></td></tr></table></figure>

<p>#####class注意项:</p>
<ol>
<li>实例化要用new关键字</li>
<li>class没有作用域提升,一定要先声明,再使用</li>
<li>class名只在类内部有效:</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> MyClass = <span class="class"><span class="keyword">class</span> <span class="title">My</span></span>&#123;</span><br><span class="line">		</span><br><span class="line">		<span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span>&#123;&#125;,</span><br><span class="line">		<span class="function"><span class="title">getName</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">			<span class="keyword">return</span> My.name</span><br><span class="line">		&#125;</span><br><span class="line">	</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	My.name <span class="comment">// 报错:My未定义</span></span><br><span class="line">	(<span class="keyword">new</span> MyClass()).getName() <span class="comment">// My</span></span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/09/12/ECMAScript6/" data-id="cktgmcjtn00005ku4hxri77qg" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">September 2021</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/09/12/ECMAScript6/">(no title)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2021 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>